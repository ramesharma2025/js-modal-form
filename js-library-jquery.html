<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>jQuery Demo</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f4f6f8;
      }

      header,
      footer {
        background: #2c3e50;
        color: #fff;
        padding: 15px;
        text-align: center;
      }

      .container {
        width: 900px;
        margin: 30px auto;
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        display: flex;
        gap: 25px;
      }

      .left,
      .right {
        width: 50%;
      }

      .right {
        border-left: 1px solid #ddd;
        padding-left: 25px;
      }

      input,
      button {
        width: 100%;
        padding: 8px;
        margin: 6px 0;
        box-sizing: border-box;
      }

      button {
        background: #3498db;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 4px;
      }

      button:hover {
        background: #2980b9;
      }

      h3 {
        margin-top: 0;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }

      th,
      td {
        border: 1px solid #ccc;
        padding: 8px;
        text-align: center;
      }

      th {
        background: #ecf0f1;
      }

      footer {
        margin-top: 30px;
      }
    </style>
  </head>

  <body>
    <!-- HEADER -->
    <header>
      <h1>jQuery DOM, Events & AJAX Demo</h1>
    </header>

    <!-- MAIN -->
    <div class="container">
      <!-- LEFT: FORM -->
      <div class="left">
        <h3>User Details</h3>
        <input type="text" id="name" placeholder="Enter name" />
        <input type="email" id="email" placeholder="Enter email" />
        <input
          type="text"
          id="username"
          placeholder="Enter username (@ required)"
        />
        <button id="addUserBtn">Add User</button>
        <p id="formMsg"></p>
      </div>

      <!-- RIGHT: TABLE + AJAX -->
      <div class="right">
        <button id="loadBtn">Load 1 More User (AJAX)</button>

        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Username</th>
            </tr>
          </thead>
          <tbody id="userTable"></tbody>
        </table>
      </div>
    </div>

    <!-- FOOTER -->
    <footer>
      <p>Â© 2026 jQuery Learning Demo</p>
    </footer>

    <script>
      // $(() => {})
      $(document).ready(() => {
        const $userTable = $("#userTable");
        let loadedCount = 0;

        // ===== Load users from AJAX (1 at a time) =====
        function loadUsers(count) {
          $.ajax({
            url: "https://jsonplaceholder.typicode.com/users",
            method: "GET",
            success: (data) => {
              // console.log(data, "users");
              const users = data.slice(loadedCount, loadedCount + count);
              // console.log(users);

              users.forEach((user) => {
                // console.log(user);
                $userTable.append(`
                  <tr>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.username}</td>
                  </tr>
                `);
              });

              loadedCount += count;
            },
            error: () => {
              alert("Failed to load users");
            },
          });
        }

        // Load 4 users by default
        loadUsers(4);

        // Load 1 more user on click
        $("#loadBtn").click(() => {
          loadUsers(1);
        });

        // ===== Add user from form (1 at a time) =====
        $("#addUserBtn").click(() => {
          const name = $("#name").val().trim();
          const email = $("#email").val().trim();
          const username = $("#username").val().trim();

          if (!name || !email || !username) {
            $("#formMsg").text("All fields are required").css("color", "red");
            return;
          }

          if (!username.includes("@")) {
            $("#formMsg")
              .text("Username must contain @")
              .css("color", "orange");
            return;
          }

          $userTable.prepend(`
            <tr>
              <td>${name}</td>
              <td>${email}</td>
              <td>${username}</td>
            </tr>
          `);

          $("#formMsg").text("User added successfully").css("color", "green");

          $("#name, #email, #username").val("");
        });
      });

      // AJAX POST METHOD
      // $.ajax({
      //   url: "https://jsonplaceholder.typicode.com/posts",
      //   method: "POST",
      //   data: {
      //     title: "My Post",
      //     body: "This is a post",
      //     userId: 1,
      //   },
      //   success: function (response) {
      //     console.log("Post created:", response);
      //   },
      //   error: function (err) {
      //     console.error("Failed to create post:", err);
      //   },
      // });
    </script>
  </body>
</html>
